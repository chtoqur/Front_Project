<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <!-- <video src="./video/apple.mp4" autoplay loop muted controls></video> -->

    <canvas id="canvas" width="1920" height="1080"></canvas>
    <button>STOP</button>

    <script>
        
        //1. 캔버스 및 컨텍스트를 가지고온다.
        const canvas = document.querySelector('#canvas');
        const button = document.querySelector('button');
        const ctx = canvas.getContext('2d');

        
        const imgCount = 574;
        let imgElement;
        let imgArray = [];

        //2. 이미지를 불러와서 배열에다가 넣는다.
        for (let i = 0; i < imgCount; i++)
        {
            imgElement = new Image();
            imgElement.src = `./image/apple_${i}.png`;
            // console.log(`./image/apple${i}.png`);
            
            imgArray.push(imgElement);

        }

        // load이벤트는 자기가 로딩해야할 리소스가 다 로딩되면 발생하는 이벤트
        // 배열의 모든 image 객체가 자신의 리소스를 다 로딩했다.

        imgElement.addEventListener('load', ()=>{
            ctx.drawImage(imgArray[0], 0, 0);

        });



        let imgIndex = 0;
        const timerId = setInterval(()=>{
            ctx.drawImage(imgArray[imgIndex], 0, 0);
            //console.log("imgIndex = " + imgIndex);
            
            if (imgIndex === imgCount){
                imgIndex =0;
            }
            imgIndex++;
            

        }, 30);


        button.addEventListener('click', ()=>{
            clearInterval(timerId);

        });



        
    </script>




    
</body>
</html>